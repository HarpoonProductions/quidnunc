(()=>{var $t=Object.create;var tt=Object.defineProperty,te=Object.defineProperties,ee=Object.getOwnPropertyDescriptor,le=Object.getOwnPropertyDescriptors,ne=Object.getOwnPropertyNames,Qt=Object.getOwnPropertySymbols,de=Object.getPrototypeOf,Yt=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var ut=(l,t,e)=>t in l?tt(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e,C=(l,t)=>{for(var e in t||(t={}))Yt.call(t,e)&&ut(l,e,t[e]);if(Qt)for(var e of Qt(t))ae.call(t,e)&&ut(l,e,t[e]);return l},Xt=(l,t)=>te(l,le(t));var et=(l,t)=>()=>(t||l((t={exports:{}}).exports,t),t.exports);var ie=(l,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let d of ne(t))!Yt.call(l,d)&&d!==e&&tt(l,d,{get:()=>t[d],enumerable:!(n=ee(t,d))||n.enumerable});return l};var Jt=(l,t,e)=>(e=l!=null?$t(de(l)):{},ie(t||!l||!l.__esModule?tt(e,"default",{value:l,enumerable:!0}):e,l));var y=(l,t,e)=>new Promise((n,d)=>{var i=c=>{try{V(e.next(c))}catch(o){d(o)}},a=c=>{try{V(e.throw(c))}catch(o){d(o)}},V=c=>c.done?n(c.value):Promise.resolve(c.value).then(i,a);V((e=e.apply(l,t)).next())});var At=et((Ut,rt)=>{(function(l){"use strict";var t=function(){},e=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.msRequestAnimationFrame||function(o){return setTimeout(o,16)};function n(){var o=this;o.reads=[],o.writes=[],o.raf=e.bind(l),t("initialized",o)}n.prototype={constructor:n,runTasks:function(o){t("run tasks");for(var b;b=o.shift();)b()},measure:function(o,b){t("measure");var W=b?o.bind(b):o;return this.reads.push(W),d(this),W},mutate:function(o,b){t("mutate");var W=b?o.bind(b):o;return this.writes.push(W),d(this),W},clear:function(o){return t("clear",o),a(this.reads,o)||a(this.writes,o)},extend:function(o){if(t("extend",o),typeof o!="object")throw new Error("expected object");var b=Object.create(this);return V(b,o),b.fastdom=this,b.initialize&&b.initialize(),b},catch:null};function d(o){o.scheduled||(o.scheduled=!0,o.raf(i.bind(null,o)),t("flush scheduled"))}function i(o){t("flush");var b=o.writes,W=o.reads,Z;try{t("flushing reads",W.length),o.runTasks(W),t("flushing writes",b.length),o.runTasks(b)}catch(G){Z=G}if(o.scheduled=!1,(W.length||b.length)&&d(o),Z)if(t("task errored",Z.message),o.catch)o.catch(Z);else throw Z}function a(o,b){var W=o.indexOf(b);return!!~W&&!!o.splice(W,1)}function V(o,b){for(var W in b)b.hasOwnProperty(W)&&(o[W]=b[W])}var c=l.fastdom=l.fastdom||new n;typeof rt=="object"&&(rt.exports=c)})(typeof window!="undefined"?window:typeof Ut!="undefined"?Ut:globalThis)});var Ot=et((hl,q)=>{(function(){"use strict";var l=function(){function t(){}t.prototype=Object.create(null);function e(b,W){for(var Z=W.length,G=0;G<Z;++G)c(b,W[G])}var n={}.hasOwnProperty;function d(b,W){b[W]=!0}function i(b,W){if(W.toString!==Object.prototype.toString&&!W.toString.toString().includes("[native code]")){b[W.toString()]=!0;return}for(var Z in W)n.call(W,Z)&&(b[Z]=!!W[Z])}var a=/\s+/;function V(b,W){for(var Z=W.split(a),G=Z.length,h=0;h<G;++h)b[Z[h]]=!0}function c(b,W){if(W){var Z=typeof W;Z==="string"?V(b,W):Array.isArray(W)?e(b,W):Z==="object"?i(b,W):Z==="number"&&d(b,W)}}function o(){for(var b=arguments.length,W=Array(b),Z=0;Z<b;Z++)W[Z]=arguments[Z];var G=new t;e(G,W);var h=[];for(var s in G)G[s]&&h.push(s);return h.join(" ")}return o}();typeof q!="undefined"&&q.exports?(l.default=l,q.exports=l):window.classNames=l})()});var yt=et((Dt,_)=>{(function(l){var t={browser:[[/msie ([\.\_\d]+)/,"ie"],[/trident\/.*?rv:([\.\_\d]+)/,"ie"],[/firefox\/([\.\_\d]+)/,"firefox"],[/chrome\/([\.\_\d]+)/,"chrome"],[/version\/([\.\_\d]+).*?safari/,"safari"],[/mobile safari ([\.\_\d]+)/,"safari"],[/android.*?version\/([\.\_\d]+).*?safari/,"com.android.browser"],[/crios\/([\.\_\d]+).*?safari/,"chrome"],[/opera/,"opera"],[/opera\/([\.\_\d]+)/,"opera"],[/opera ([\.\_\d]+)/,"opera"],[/opera mini.*?version\/([\.\_\d]+)/,"opera.mini"],[/opios\/([a-z\.\_\d]+)/,"opera"],[/blackberry/,"blackberry"],[/blackberry.*?version\/([\.\_\d]+)/,"blackberry"],[/bb\d+.*?version\/([\.\_\d]+)/,"blackberry"],[/rim.*?version\/([\.\_\d]+)/,"blackberry"],[/iceweasel\/([\.\_\d]+)/,"iceweasel"],[/edge\/([\.\d]+)/,"edge"]],os:[[/linux ()([a-z\.\_\d]+)/,"linux"],[/mac os x/,"macos"],[/mac os x.*?([\.\_\d]+)/,"macos"],[/os ([\.\_\d]+) like mac os/,"ios"],[/openbsd ()([a-z\.\_\d]+)/,"openbsd"],[/android/,"android"],[/android ([a-z\.\_\d]+);/,"android"],[/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/,"firefoxos"],[/windows\s*(?:nt)?\s*([\.\_\d]+)/,"windows"],[/windows phone.*?([\.\_\d]+)/,"windows.phone"],[/windows mobile/,"windows.mobile"],[/blackberry/,"blackberryos"],[/bb\d+/,"blackberryos"],[/rim.*?os\s*([\.\_\d]+)/,"blackberryos"]],device:[[/ipad/,"ipad"],[/iphone/,"iphone"],[/lumia/,"lumia"],[/htc/,"htc"],[/nexus/,"nexus"],[/galaxy nexus/,"galaxy.nexus"],[/nokia/,"nokia"],[/ gt\-/,"galaxy"],[/ sm\-/,"galaxy"],[/xbox/,"xbox"],[/(?:bb\d+)|(?:blackberry)|(?: rim )/,"blackberry"]]},e="Unknown",n=Object.keys(t);function d(){var V=this;n.forEach(function(c){V[c]={name:e,version:[],versionString:e}})}function i(V,c,o){t[c].forEach(function(b){var W=b[0],Z=b[1],G=o.match(W);G&&(V[c].name=Z,G[2]?(V[c].versionString=G[2],V[c].version=[]):G[1]?(V[c].versionString=G[1].replace(/_/g,"."),V[c].version=a(G[1])):(V[c].versionString=e,V[c].version=[]))})}function a(V){return V.split(/[\._]/).map(function(c){return parseInt(c)})}d.prototype.sniff=function(V){var c=this,o=typeof window!="undefined",b=o?navigator.userAgent:"",W=(V||b).toLowerCase();return n.forEach(function(Z){i(c,Z,W)}),this},typeof _!="undefined"&&_.exports?_.exports=d:(l.Sniffr=new d,l.Sniffr.sniff(navigator.userAgent))})(Dt)});function k(l){return Array.isArray?Array.isArray(l):Et(l)==="[object Array]"}var ce=1/0;function Ve(l){if(typeof l=="string")return l;let t=l+"";return t=="0"&&1/l==-ce?"-0":t}function oe(l){return l==null?"":Ve(l)}function x(l){return typeof l=="string"}function kt(l){return typeof l=="number"}function be(l){return l===!0||l===!1||We(l)&&Et(l)=="[object Boolean]"}function St(l){return typeof l=="object"}function We(l){return St(l)&&l!==null}function u(l){return l!=null}function lt(l){return!l.trim().length}function Et(l){return l==null?l===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(l)}var Ze="Incorrect 'index' type",Ge=l=>`Invalid value for key ${l}`,he=l=>`Pattern length exceeds max of ${l}.`,Re=l=>`Missing ${l} property in key`,se=l=>`Property 'weight' in key '${l}' must be a positive integer`,Tt=Object.prototype.hasOwnProperty,nt=class{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach(n=>{let d=jt(n);this._keys.push(d),this._keyMap[d.id]=d,e+=d.weight}),this._keys.forEach(n=>{n.weight/=e})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function jt(l){let t=null,e=null,n=null,d=1,i=null;if(x(l)||k(l))n=l,t=xt(l),e=dt(l);else{if(!Tt.call(l,"name"))throw new Error(Re("name"));let a=l.name;if(n=a,Tt.call(l,"weight")&&(d=l.weight,d<=0))throw new Error(se(a));t=xt(a),e=dt(a),i=l.getFn}return{path:t,id:e,weight:d,src:n,getFn:i}}function xt(l){return k(l)?l:l.split(".")}function dt(l){return k(l)?l.join("."):l}function Ue(l,t){let e=[],n=!1,d=(i,a,V)=>{if(u(i))if(!a[V])e.push(i);else{let c=a[V],o=i[c];if(!u(o))return;if(V===a.length-1&&(x(o)||kt(o)||be(o)))e.push(oe(o));else if(k(o)){n=!0;for(let b=0,W=o.length;b<W;b+=1)d(o[b],a,V+1)}else a.length&&d(o,a,V+1)}};return d(l,x(t)?t.split("."):t,0),n?e:e[0]}var re={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},pe={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(l,t)=>l.score===t.score?l.idx<t.idx?-1:1:l.score<t.score?-1:1},me={location:0,threshold:.6,distance:100},Fe={useExtendedSearch:!1,getFn:Ue,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},U=C(C(C(C({},pe),re),me),Fe),ge=/[^ ]+/g;function Ie(l=1,t=3){let e=new Map,n=Math.pow(10,t);return{get(d){let i=d.match(ge).length;if(e.has(i))return e.get(i);let a=1/Math.pow(i,.5*l),V=parseFloat(Math.round(a*n)/n);return e.set(i,V),V},clear(){e.clear()}}}var z=class{constructor({getFn:t=U.getFn,fieldNormWeight:e=U.fieldNormWeight}={}){this.norm=Ie(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((e,n)=>{this._keysMap[e.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,x(this.docs[0])?this.docs.forEach((t,e)=>{this._addString(t,e)}):this.docs.forEach((t,e)=>{this._addObject(t,e)}),this.norm.clear())}add(t){let e=this.size();x(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!u(t)||lt(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach((d,i)=>{let a=d.getFn?d.getFn(t):this.getFn(t,d.path);if(u(a)){if(k(a)){let V=[],c=[{nestedArrIndex:-1,value:a}];for(;c.length;){let{nestedArrIndex:o,value:b}=c.pop();if(u(b))if(x(b)&&!lt(b)){let W={v:b,i:o,n:this.norm.get(b)};V.push(W)}else k(b)&&b.forEach((W,Z)=>{c.push({nestedArrIndex:Z,value:W})})}n.$[i]=V}else if(x(a)&&!lt(a)){let V={v:a,n:this.norm.get(a)};n.$[i]=V}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}};function wt(l,t,{getFn:e=U.getFn,fieldNormWeight:n=U.fieldNormWeight}={}){let d=new z({getFn:e,fieldNormWeight:n});return d.setKeys(l.map(jt)),d.setSources(t),d.create(),d}function Ne(l,{getFn:t=U.getFn,fieldNormWeight:e=U.fieldNormWeight}={}){let{keys:n,records:d}=l,i=new z({getFn:t,fieldNormWeight:e});return i.setKeys(n),i.setIndexRecords(d),i}function v(l,{errors:t=0,currentLocation:e=0,expectedLocation:n=0,distance:d=U.distance,ignoreLocation:i=U.ignoreLocation}={}){let a=t/l.length;if(i)return a;let V=Math.abs(n-e);return d?a+V/d:V?1:a}function Be(l=[],t=U.minMatchCharLength){let e=[],n=-1,d=-1,i=0;for(let a=l.length;i<a;i+=1){let V=l[i];V&&n===-1?n=i:!V&&n!==-1&&(d=i-1,d-n+1>=t&&e.push([n,d]),n=-1)}return l[i-1]&&i-n>=t&&e.push([n,i-1]),e}var j=32;function Qe(l,t,e,{location:n=U.location,distance:d=U.distance,threshold:i=U.threshold,findAllMatches:a=U.findAllMatches,minMatchCharLength:V=U.minMatchCharLength,includeMatches:c=U.includeMatches,ignoreLocation:o=U.ignoreLocation}={}){if(t.length>j)throw new Error(he(j));let b=t.length,W=l.length,Z=Math.max(0,Math.min(n,W)),G=i,h=Z,s=V>1||c,g=s?Array(W):[],m;for(;(m=l.indexOf(t,h))>-1;){let Q=v(t,{currentLocation:m,expectedLocation:Z,distance:d,ignoreLocation:o});if(G=Math.min(Q,G),h=m+b,s){let X=0;for(;X<b;)g[m+X]=1,X+=1}}h=-1;let T=[],Y=1,E=b+W,D=1<<b-1;for(let Q=0;Q<b;Q+=1){let X=0,J=E;for(;X<J;)v(t,{errors:Q,currentLocation:Z+J,expectedLocation:Z,distance:d,ignoreLocation:o})<=G?X=J:E=J,J=Math.floor((E-X)/2+X);E=J;let r=Math.max(1,Z-J+1),N=a?W:Math.min(Z+J,W)+b,R=Array(N+2);R[N+1]=(1<<Q)-1;for(let I=N;I>=r;I-=1){let S=I-1,Bt=e[l.charAt(S)];if(s&&(g[S]=+!!Bt),R[I]=(R[I+1]<<1|1)&Bt,Q&&(R[I]|=(T[I+1]|T[I])<<1|1|T[I+1]),R[I]&D&&(Y=v(t,{errors:Q,currentLocation:S,expectedLocation:Z,distance:d,ignoreLocation:o}),Y<=G)){if(G=Y,h=S,h<=Z)break;r=Math.max(1,2*Z-h)}}if(v(t,{errors:Q+1,currentLocation:Z,expectedLocation:Z,distance:d,ignoreLocation:o})>G)break;T=R}let w={isMatch:h>=0,score:Math.max(.001,Y)};if(s){let Q=Be(g,V);Q.length?c&&(w.indices=Q):w.isMatch=!1}return w}function ue(l){let t={};for(let e=0,n=l.length;e<n;e+=1){let d=l.charAt(e);t[d]=(t[d]||0)|1<<n-e-1}return t}var L=class{constructor(t,{location:e=U.location,threshold:n=U.threshold,distance:d=U.distance,includeMatches:i=U.includeMatches,findAllMatches:a=U.findAllMatches,minMatchCharLength:V=U.minMatchCharLength,isCaseSensitive:c=U.isCaseSensitive,ignoreLocation:o=U.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:d,includeMatches:i,findAllMatches:a,minMatchCharLength:V,isCaseSensitive:c,ignoreLocation:o},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;let b=(Z,G)=>{this.chunks.push({pattern:Z,alphabet:ue(Z),startIndex:G})},W=this.pattern.length;if(W>j){let Z=0,G=W%j,h=W-G;for(;Z<h;)b(this.pattern.substr(Z,j),Z),Z+=j;if(G){let s=W-j;b(this.pattern.substr(s),s)}}else b(this.pattern,0)}searchIn(t){let{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let h={isMatch:!0,score:0};return n&&(h.indices=[[0,t.length-1]]),h}let{location:d,distance:i,threshold:a,findAllMatches:V,minMatchCharLength:c,ignoreLocation:o}=this.options,b=[],W=0,Z=!1;this.chunks.forEach(({pattern:h,alphabet:s,startIndex:g})=>{let{isMatch:m,score:T,indices:Y}=Qe(t,h,s,{location:d+g,distance:i,threshold:a,findAllMatches:V,minMatchCharLength:c,includeMatches:n,ignoreLocation:o});m&&(Z=!0),W+=T,m&&Y&&(b=[...b,...Y])});let G={isMatch:Z,score:Z?W/this.chunks.length:1};return Z&&n&&(G.indices=b),G}},M=class{constructor(t){this.pattern=t}static isMultiMatch(t){return Mt(t,this.multiRegex)}static isSingleMatch(t){return Mt(t,this.singleRegex)}search(){}};function Mt(l,t){let e=l.match(t);return e?e[1]:null}var at=class extends M{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){let e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},it=class extends M{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){let n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}},ct=class extends M{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){let e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},Vt=class extends M{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){let e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},ot=class extends M{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){let e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},bt=class extends M{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){let e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},f=class extends M{constructor(t,{location:e=U.location,threshold:n=U.threshold,distance:d=U.distance,includeMatches:i=U.includeMatches,findAllMatches:a=U.findAllMatches,minMatchCharLength:V=U.minMatchCharLength,isCaseSensitive:c=U.isCaseSensitive,ignoreLocation:o=U.ignoreLocation}={}){super(t),this._bitapSearch=new L(t,{location:e,threshold:n,distance:d,includeMatches:i,findAllMatches:a,minMatchCharLength:V,isCaseSensitive:c,ignoreLocation:o})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}},P=class extends M{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e=0,n,d=[],i=this.pattern.length;for(;(n=t.indexOf(this.pattern,e))>-1;)e=n+i,d.push([n,e-1]);let a=!!d.length;return{isMatch:a,score:a?0:1,indices:d}}},Wt=[at,P,ct,Vt,bt,ot,it,f],Ht=Wt.length,Ye=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Xe="|";function Je(l,t={}){return l.split(Xe).map(e=>{let n=e.trim().split(Ye).filter(i=>i&&!!i.trim()),d=[];for(let i=0,a=n.length;i<a;i+=1){let V=n[i],c=!1,o=-1;for(;!c&&++o<Ht;){let b=Wt[o],W=b.isMultiMatch(V);W&&(d.push(new b(W,t)),c=!0)}if(!c)for(o=-1;++o<Ht;){let b=Wt[o],W=b.isSingleMatch(V);if(W){d.push(new b(W,t));break}}}return d})}var Te=new Set([f.type,P.type]),Zt=class{constructor(t,{isCaseSensitive:e=U.isCaseSensitive,includeMatches:n=U.includeMatches,minMatchCharLength:d=U.minMatchCharLength,ignoreLocation:i=U.ignoreLocation,findAllMatches:a=U.findAllMatches,location:V=U.location,threshold:c=U.threshold,distance:o=U.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:d,findAllMatches:a,ignoreLocation:i,location:V,threshold:c,distance:o},this.pattern=e?t:t.toLowerCase(),this.query=Je(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){let e=this.query;if(!e)return{isMatch:!1,score:1};let{includeMatches:n,isCaseSensitive:d}=this.options;t=d?t:t.toLowerCase();let i=0,a=[],V=0;for(let c=0,o=e.length;c<o;c+=1){let b=e[c];a.length=0,i=0;for(let W=0,Z=b.length;W<Z;W+=1){let G=b[W],{isMatch:h,indices:s,score:g}=G.search(t);if(h){if(i+=1,V+=g,n){let m=G.constructor.type;Te.has(m)?a=[...a,...s]:a.push(s)}}else{V=0,i=0,a.length=0;break}}if(i){let W={isMatch:!0,score:V/i};return n&&(W.indices=a),W}}return{isMatch:!1,score:1}}},Gt=[];function xe(...l){Gt.push(...l)}function ht(l,t){for(let e=0,n=Gt.length;e<n;e+=1){let d=Gt[e];if(d.condition(l,t))return new d(l,t)}return new L(l,t)}var K={AND:"$and",OR:"$or"},Rt={PATH:"$path",PATTERN:"$val"},st=l=>!!(l[K.AND]||l[K.OR]),Me=l=>!!l[Rt.PATH],He=l=>!k(l)&&St(l)&&!st(l),Ct=l=>({[K.AND]:Object.keys(l).map(t=>({[t]:l[t]}))});function zt(l,t,{auto:e=!0}={}){let n=d=>{let i=Object.keys(d),a=Me(d);if(!a&&i.length>1&&!st(d))return n(Ct(d));if(He(d)){let c=a?d[Rt.PATH]:i[0],o=a?d[Rt.PATTERN]:d[c];if(!x(o))throw new Error(Ge(c));let b={keyId:dt(c),pattern:o};return e&&(b.searcher=ht(o,t)),b}let V={children:[],operator:i[0]};return i.forEach(c=>{let o=d[c];k(o)&&o.forEach(b=>{V.children.push(n(b))})}),V};return st(l)||(l=Ct(l)),n(l)}function Ce(l,{ignoreFieldNorm:t=U.ignoreFieldNorm}){l.forEach(e=>{let n=1;e.matches.forEach(({key:d,norm:i,score:a})=>{let V=d?d.weight:null;n*=Math.pow(a===0&&V?Number.EPSILON:a,(V||1)*(t?1:i))}),e.score=n})}function ke(l,t){let e=l.matches;t.matches=[],u(e)&&e.forEach(n=>{if(!u(n.indices)||!n.indices.length)return;let{indices:d,value:i}=n,a={indices:d,value:i};n.key&&(a.key=n.key.src),n.idx>-1&&(a.refIndex=n.idx),t.matches.push(a)})}function Se(l,t){t.score=l.score}function Ee(l,t,{includeMatches:e=U.includeMatches,includeScore:n=U.includeScore}={}){let d=[];return e&&d.push(ke),n&&d.push(Se),l.map(i=>{let{idx:a}=i,V={item:t[a],refIndex:a};return d.length&&d.forEach(c=>{c(i,V)}),V})}var H=class{constructor(t,e={},n){this.options=C(C({},U),e),this.options.useExtendedSearch,this._keyStore=new nt(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof z))throw new Error(Ze);this._myIndex=e||wt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){u(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){let e=[];for(let n=0,d=this._docs.length;n<d;n+=1){let i=this._docs[n];t(i,n)&&(this.removeAt(n),n-=1,d-=1,e.push(i))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){let{includeMatches:n,includeScore:d,shouldSort:i,sortFn:a,ignoreFieldNorm:V}=this.options,c=x(t)?x(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Ce(c,{ignoreFieldNorm:V}),i&&c.sort(a),kt(e)&&e>-1&&(c=c.slice(0,e)),Ee(c,this._docs,{includeMatches:n,includeScore:d})}_searchStringList(t){let e=ht(t,this.options),{records:n}=this._myIndex,d=[];return n.forEach(({v:i,i:a,n:V})=>{if(!u(i))return;let{isMatch:c,score:o,indices:b}=e.searchIn(i);c&&d.push({item:i,idx:a,matches:[{score:o,value:i,norm:V,indices:b}]})}),d}_searchLogical(t){let e=zt(t,this.options),n=(V,c,o)=>{if(!V.children){let{keyId:W,searcher:Z}=V,G=this._findMatches({key:this._keyStore.get(W),value:this._myIndex.getValueForItemAtKeyId(c,W),searcher:Z});return G&&G.length?[{idx:o,item:c,matches:G}]:[]}let b=[];for(let W=0,Z=V.children.length;W<Z;W+=1){let G=V.children[W],h=n(G,c,o);if(h.length)b.push(...h);else if(V.operator===K.AND)return[]}return b},d=this._myIndex.records,i={},a=[];return d.forEach(({$:V,i:c})=>{if(u(V)){let o=n(e,V,c);o.length&&(i[c]||(i[c]={idx:c,item:V,matches:[]},a.push(i[c])),o.forEach(({matches:b})=>{i[c].matches.push(...b)}))}}),a}_searchObjectList(t){let e=ht(t,this.options),{keys:n,records:d}=this._myIndex,i=[];return d.forEach(({$:a,i:V})=>{if(!u(a))return;let c=[];n.forEach((o,b)=>{c.push(...this._findMatches({key:o,value:a[b],searcher:e}))}),c.length&&i.push({idx:V,item:a,matches:c})}),i}_findMatches({key:t,value:e,searcher:n}){if(!u(e))return[];let d=[];if(k(e))e.forEach(({v:i,i:a,n:V})=>{if(!u(i))return;let{isMatch:c,score:o,indices:b}=n.searchIn(i);c&&d.push({score:o,key:t,value:i,idx:a,norm:V,indices:b})});else{let{v:i,n:a}=e,{isMatch:V,score:c,indices:o}=n.searchIn(i);V&&d.push({score:c,key:t,value:i,norm:a,indices:o})}return d}};H.version="7.0.0";H.createIndex=wt;H.parseIndex=Ne;H.config=U;H.parseQuery=zt;xe(Zt);window.hasOwnProperty("Shorthand")||(window.Shorthand={});var ze=Jt(At());var je=Jt(Ot());var rl=yt();function F(l,t=null){let n=we(t).querySelectorAll(l);return Array.from(n)}function B(l,t=null){let e=F(l,t);return e.length===0?!1:e[0]}function we(l){return l||(window.__shadowRoot?window.__shadowRoot.querySelector("article"):document)}var $={getOrientation(){return window.Shorthand.displayContainer?$.getWidth()>$.getHeight()?"landscape":"portrait":window.innerWidth>window.innerHeight?"landscape":"portrait"},getHeight(){return window.Shorthand.displayContainer.getCache().height},getWidth(){return window.Shorthand.displayContainer.getCache().width},getTop(){return window.Shorthand.displayContainer.getCache().top},getBottom(){return window.Shorthand.displayContainer.getCache().bottom},getVhUnitsInPixels(l){return $.getHeight()*(l/100)},getDisplayContainer(){return window.Shorthand.displayContainer}},A=$;var vt={facebook:{networkName:"Facebook",shareAction:"Share",popupWidth:600,popupHeight:420},twitter:{networkName:"Twitter",shareAction:"Tweet",popupWidth:600,popupHeight:250},linkedin:{networkName:"LinkedIn",shareAction:"Share",popupWidth:600,popupHeight:250}};function Ae(l,t){let e=Math.round(A.getWidth()/2-t.popupWidth/2),n=0;A.getHeight()>t.popupHeight&&(n=Math.round(A.getHeight()/3-t.popupHeight/2));let d={left:e,top:n,width:t.popupWidth,height:t.popupHeight,personalbar:0,toolbar:0,scrollbars:1,resizable:1},i=Object.keys(d).map(c=>`${c}=${d[c]}`).join(","),a="social-widget-"+t.networkName.replace(/\s+/,"-"),V=window.open(l,a,i);V?V.focus():location.href=l}function Oe(l){l.preventDefault();let t=l.currentTarget,e=t.getAttribute("data-social-share"),n=vt[e],d=t.href;Ae(d,n)}function De(l){let t=l.getAttribute("data-social-share");t in vt?l.addEventListener("click",Oe,{passive:!1}):console.error(`Social Share button of type ${t} is not supported.`)}function pt(l="[data-social-share]"){F(l).forEach(De)}var O=class{constructor({baseUrl:t,componentsBaseUrl:e,publishUrl:n},d){this.baseUrl=t,this.publishUrl=n!=null?n:"",this.componentsBaseUrl=e,this.index=d,this.isEmbed="embed"in window.Shorthand}isEmbedLink(t){return this.isEmbed&&t.startsWith(this.publishUrl)}getHeaderNavigation(){return this.compileNavigation(this.index.headerNavigation)}getFooterNavigation(){return this.compileNavigation(this.index.footerNavigation)}compileNavigation(t){var n,d,i;let e=t.hasManualItems?t.items:this.index.roots.map(a=>({label:this.index.nodes[a].label,nodeId:a,url:""}));return{isEnabled:t.isEnabled,option:t.option,hasSocials:t.hasSocials,social:t.social,hasSearch:t.hasSearch,showThemeLogos:t.showThemeLogos,logos:((n=t.logos)!=null?n:[]).map(a=>this.compileLogo(a)),color:(d=t.color)!=null?d:void 0,fontColor:(i=t.fontColor)!=null?i:void 0,items:e.reduce((a,V)=>{let c=this.compileNavigationItem(V);return c&&a.push(c),a},[])}}compileLogo(t){let e={media:{}};for(let n of t.media)n.uri&&(e.media[n.sel]={src:this.getProjectUrl(n.uri),alt:n.alt});return t.link&&(e.link=Xt(C({},t.link),{href:this.getProjectUrl(t.link.href)})),e}compileNavigationItem({label:t,nodeId:e,url:n}){var a,V,c;if(n)return{label:t,url:n,children:[]};let d=this.index.nodes[e];if(!d)return;let i=(V=(a=d.children)==null?void 0:a.reduce((o,b)=>{let W=this.index.nodes[b];return W!=null&&W.page&&o.push({label:W.label||this.index.pages[W.page].title||"Untitled story",url:this.getPageUrl(W.page)}),o},[]))!=null?V:[];return d.page&&(n=this.getPageUrl(d.page)),{label:t||d.label||((c=this.index.pages[d.page])==null?void 0:c.title)||"Untitled story",url:n,children:i}}externalLinkToProjectPage(t){return{pageId:t.id,url:t.url,title:t.title,description:t.description,publishedAt:new Date,tags:[],cover:this.compileCover(t.cover)}}getProjectPage(t,e){var d;let n=this.index.pages[t];if(n)return{pageId:t,url:this.getPageUrl(t),title:e!=null&&e.title?e.title:n.title,description:e!=null&&e.description?e.description:n.description,publishedAt:new Date(n.at),tags:(d=n.tags)!=null?d:[],cover:e!=null&&e.cover?this.compileCover(e.cover):this.compileCover(n.cover,t)}}compileCover(t,e){if(t){let{image:n,sources:d=[]}=t!=null?t:{};return{url:e?this.getPageAssetUrl(e,n):n,sources:d.map(({t:i,s:a})=>({type:i,srcSet:a.map(({u:V,w:c})=>{let o=e?this.getPageAssetUrl(e,V):V;return c?`${o} ${c}w`:o}).join(",")}))}}}getProjectPageIds(){return Object.keys(this.index.pages)}getTaggedPageIds(t,e){let n=new Set(t);return Object.keys(this.index.pages).filter(d=>{var a,V;let i=(V=(a=this.index.pages[d])==null?void 0:a.tags)!=null?V:[];return e==="all"?i.filter(c=>n.has(c)).length>=n.size:i.find(c=>n.has(c))})}getSubpageIds(t,e,n,d){e||(e=this.index.pages[n].nodeId),t==="siblings"&&(e=Object.entries(this.index.nodes).reduce((c,[o,b])=>b.children.includes(e)?o:c,e));let i=Object.keys(this.index.nodes).find(c=>this.index.nodes[c].page===n),a=this.index.nodes[e];return this._getChildren(a,t,d?null:i).reduce((c,o)=>{let b=this.index.nodes[o];return b.page?c.concat(b.page):c},[])}_getChildren(t,e,n){if(!t)return[];let d=t.children.filter(i=>i!==n);return e==="descendants"?d.reduce((i,a)=>i.concat(a).concat(this._getChildren(this.index.nodes[a],e,n)),[]):d}getPageAssetUrl(t,e){var i;if(!e)return;let n=this.index.pages[t],d=this.index.nodes[n==null?void 0:n.nodeId];if(!(!n||!d))return/^(https?:\/\/|\/)/.exec(e)?e:this.isEmbed?`${this.publishUrl}${d.uri}${e}`:`${(i=this.componentsBaseUrl)!=null?i:this.baseUrl}${d.uri}${e}`}getPageUrl(t){var i;let e=this.index.pages[t],n=this.index.nodes[e==null?void 0:e.nodeId];if(!e||!n)return;let d=(i=e.uri)!=null?i:`${n.uri}index.html`;return/^(https?:\/\/|\/)/.exec(d)?d:this.isEmbed?`${this.publishUrl}${d}`:`${this.baseUrl}${d}`}getProjectUrl(t){return/^(https?:\/\/|\/)/.exec(t)?t:`${this.baseUrl}${t}`}getSearchIndexUrl(){return`${this.baseUrl}search-index.json`}getSearchTextUrl(){return`${this.baseUrl}search-text.json`}};function Ft(l,t){ye(l,t),ve(t),document.addEventListener("mousedown",e=>{!t.contains(e.target)&&!l.contains(e.target)&&t.classList.remove("project-search--isActive")},!0)}function ye(l,t){l.addEventListener("click",e=>{e.preventDefault(),t.classList.add("project-search--isActive")})}function ve(l){document.querySelector(".project-search-close-button").addEventListener("click",e=>{e.preventDefault(),l.classList.remove("project-search--isActive")})}function Lt(l){var Z,G;if(!((G=(Z=l.matches)==null?void 0:Z[0])!=null&&G.indices.length))return"";let{indices:t,value:e}=l.matches[0],n=t.map(([h,s])=>[h,s+1]),[d,i]=n[0],a=Math.max(0,d-50),V=Math.min(i+50,e.length),c=e.slice(a,V),o=[],b=Le(n,a,V),W=0;for(let[h,s]of b){let g=h-a,m=s-a,T=c.slice(W,g),Y=c.slice(g,m);o.push(mt(T),fe(mt(Y))),W=m}return o.push(mt(c.slice(W))),`${a>0?"&hellip; ":""}${o.join("")}${V<e.length?" &hellip;":""}`}function Le(l,t,e){l=l.filter(([d,i])=>d<e&&i>t);let n=[];for(let[d,i]of l){let a=[Math.max(d,t),Math.min(i,e)],V=n[n.length-1];V&&V[1]>a[0]?V[1]=Math.max(V[1],a[1]):n.push(a)}return n}function fe(l){return`<span class="search-input-highlight">${l}</span>`}function mt(l){return l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Nt(){if(!window.hasOwnProperty("$shproject")||window.$shproject===void 0)return;let l=!1,t={create:()=>y(this,null,function*(){if(!l){l=!0;let e=window.$shproject,n=Promise.resolve(null);e.index?n=Promise.resolve(new O(e,e.index)):n=new Promise((d,i)=>{let a=document.createElement("script");a.src=`${e.publishUrl.replace(e.pageUri,"")}project.js`,a.addEventListener("load",()=>{d(new O(window.$shproject,window.$shproject.index))}),a.addEventListener("error",i),B("#article").appendChild(a)}),window.Shorthand.project.get=()=>n}}),get:()=>y(this,null,function*(){return console.error("Project API is not ready yet"),null})};window.hasOwnProperty("Shorthand")?window.Shorthand.hasOwnProperty("project")||(window.Shorthand.project=t):window.Shorthand={project:t},window.Shorthand.project.get||(window.Shorthand.project.create=t.get),window.Shorthand.project.create||(window.Shorthand.project.create=t.create),window.Shorthand.project.create().catch(console.error),window.Shorthand.project.get().then(e=>{e&&(Pe(e),Ke(e),pt(),el(e))}).catch(console.error)}function Pe(l){let t=B("[data-project-header]"),e=l.getHeaderNavigation(),n=e.option!=="D";if(!t||!e.isEnabled)return;t.classList.remove("Theme-HeaderContainer--hidden");let d=B(".project-search-button",t),i=B("div[data-project-search-sidebar]",t);Pt(l,t,e),n?Kt(l,t,e,"header"):t.querySelector(".Navigation__hamburger").remove(),e.hasSearch&&d&&i?qe(l,i,d):(d&&d.remove(),i&&i.remove()),qt(t,e,"header")}function Ke(l){let t=B("[data-project-footer]"),e=l.getFooterNavigation();!t||!e.isEnabled||(Pt(l,t,e),Kt(l,t,e,"footer"),qt(t,e,"footer"))}function qe(l,t,e){Ft(e,t);let n=B("div[data-project-search]",t),d=B("button[data-project-search-close-button]");!n||!d||Promise.all([ft(l.getSearchIndexUrl(),"search index"),ft(l.getSearchTextUrl(),"search index text")]).then(([i,a])=>{let V=new H(a,{ignoreLocation:!0,ignoreFieldNorm:!0,shouldSort:!0,includeMatches:!0,minMatchCharLength:3,threshold:0},H.parseIndex(i));_e(l,n,t,d,V)}).catch(i=>{console.error(`Could not set up search: ${i}`),n.remove()})}function ft(l,t){return y(this,null,function*(){let e=yield fetch(l);if(!e.ok)throw new Error(`Status ${e.status} downloading ${t}: ${e.statusText}`);return e.json()})}function _e(l,t,e,n,d){let i=t.querySelector("input[data-item-searchterm]"),a=t.querySelector(".project-search-delete-btn"),V=t.querySelector(".project-search-enter-btn");function c(Z){V.style.display=Z?"inline":"none",a.style.display=Z?"none":"inline"}function o(Z){Z.value="",gt(e),c(!1)}function b(Z){let G=Z.value.trim();if(G){let h=d.search(G);$e(h,e,l),c(!1)}}function W(Z){Z.value.trim()===""?(c(!1),gt(e)):e.querySelector(".project-search-results")||c(!0)}i.onkeydown=Z=>{Z.key==="Enter"&&(Z.preventDefault(),b(i),c(!1))},i.addEventListener("input",()=>{W(i)}),a.onclick=()=>{o(i)},n.onclick=()=>{o(i)},V.onclick=()=>{b(i)}}function gt(l){let t=l.querySelector(".project-search-results");t&&t.remove()}function $e(l,t,e){gt(t);let n=document.createElement("ul");n.className="project-search-results";let d=`
 <li class="no-result-list--item">
    <span class="no-results-heading"> No matching results </span>
    <span>You could try: </span>

    <span class="search-options">related, or more general words</span>
    <span class="search-options">alternate spelling</span>
  </li>
`;l.length===0?n.innerHTML=d:l.forEach(i=>{var b,W,Z,G;let a=e.getProjectPage(i.item.id),V=Lt(i),c=document.createElement("li");c.className="project-story-list-item";let o=t.querySelector("template[data-project-search-results-template]");if("content"in o){let h=o==null?void 0:o.content.cloneNode(!0),s=h.querySelector(".project-card-image"),g=h.querySelector(".project-image-link");g.href=a.url,s.src=(W=(b=a.cover)==null?void 0:b.url)!=null?W:"",s.alt=`Cover for ${a.title}`,h.querySelector(".project-match-snippet-container").innerHTML=V,h.querySelector(".project-story-title").textContent=a.title,h.querySelector(".project-story-description").textContent=((Z=a.description)==null?void 0:Z.length)>50?((G=a.description)==null?void 0:G.substring(0,50))+"...":a.description,c.appendChild(h),n.append(c)}}),t.querySelector(".project-sidebar-container").append(n)}function Pt(l,t,e){var d;if(t.style.removeProperty("display"),e.color){t.style.backgroundColor=(d=e.color)==null?void 0:d.color;let i=F(".Theme-NavigationBar")[1];i&&e.color&&(i.style.backgroundColor=e.color.color),i&&e.fontColor&&Array.from(i.querySelectorAll(".Theme-NavigationBarItem")).forEach(a=>{a.style.color=e.fontColor.color})}t.classList.add(`ProjectNavigation--${e.option}`);let n=B("[data-project-logos]",t);n&&dl(l,e.logos,e.showThemeLogos,n)}function Kt(l,t,e,n){let d=t.querySelector(".Navigation");e.color&&d.classList.add(e.color.className);let i=t.querySelector("ul");e.items.forEach(a=>{var o,b,W;let V=document.createElement("li");V.style.color=(o=e.fontColor)==null?void 0:o.color,V.className="Navigation__item Theme-NavigationBarItem";let c=document.createElement(a.url?"a":"span");if(c.className="Theme-NavigationLink",c.setAttribute("data-story-nav-item","true"),c.textContent=a.label,a.url)if(l.isEmbedLink(a.url)){let{path:Z,url:G}=It(l,a.url);c.setAttribute("data-path",Z),c.setAttribute("href",G)}else c.href=a.url;if(V.appendChild(c),i.appendChild(V),a.children.length>0){V.classList.add("hasMenu");let Z=document.createElement("ul");if(Z.className="Navigation__subMenu Theme-ProjectNavigation-subMenu",Z.style.backgroundColor=(b=e.color)==null?void 0:b.color,Z.setAttribute("role","menu"),n==="header"){let G=document.createElement("button");G.className="Navigation__button",G.style.color=(W=e.fontColor)==null?void 0:W.color,G.setAttribute("aria-label",`show submenu for ${a.label}`),G.addEventListener("click",function(){let s=this.parentNode;s.className.includes("isOpen")?(s.classList.remove("isOpen"),this.setAttribute("aria-expanded","false")):(s.classList.add("isOpen"),this.setAttribute("aria-expanded","true"))});let h=document.createElement("span");h.className="menuCaret",G.appendChild(h),V.addEventListener("mouseenter",function(){this.classList.add("isOpen"),G.setAttribute("aria-expanded","true")}),V.addEventListener("mouseleave",function(){this.classList.remove("isOpen"),G.setAttribute("aria-expanded","false")}),V.appendChild(G)}a.children.forEach(G=>{let h=document.createElement("li");h.className="Navigation__item Theme-NavigationBarItem Theme-ProjectNavigation-subItem",h.setAttribute("role","menuitem");let s=document.createElement("a");if(s.className="Theme-NavigationLink",s.textContent=G.label,l.isEmbedLink(G.url)){let{path:g,url:m}=It(l,G.url);s.setAttribute("data-path",g),s.setAttribute("href",m)}else s.href=G.url;h.appendChild(s),Z.appendChild(h)}),V.appendChild(Z)}}),_t(i)}function qt(l,t,e){let n=encodeURIComponent(document.location.href),d=e==="header"?l.querySelector(".Project-Header--right .Theme-SocialIcons"):l.querySelector(".Project-Footer--right .Theme-SocialIcons");if(t.social.showTwitter){let i=JSON.parse(d.getAttribute("data-text")),a=document.createElement("span");a.className="Theme-SocialButton";let V=document.createElement("a");V.className="Theme-TwitterButton",V.href=`https://twitter.com/intent/tweet?url=${n}${i.text}${i.via}`,V.setAttribute("data-social-share","twitter"),V.setAttribute("data-testid","Header--btn-Twitter"),a.appendChild(V),d.appendChild(a)}if(t.social.showFacebook){let i=document.createElement("span");i.className="Theme-SocialButton";let a=document.createElement("a");a.className="Theme-FacebookButton Theme-FaceboookButton",a.href=`https://www.facebook.com/sharer/sharer.php?u=${n}`,a.setAttribute("data-social-share","facebook"),a.setAttribute("data-testid","Header--btn-Facebook"),i.appendChild(a),d.appendChild(i)}if(t.social.showLinkedIn){let i=document.createElement("span");i.className="Theme-SocialButton";let a=document.createElement("a");a.className="Theme-LIButton",a.href=`https://www.linkedin.com/shareArticle?mini=true&url=${n}`,a.setAttribute("data-social-share","linkedin"),a.setAttribute("data-testid","Header--btn-LinkedIn"),i.appendChild(a),d.appendChild(i)}}function tl(l){let t=l.length;for(;t>0;){let e=Math.floor(Math.random()*t);t--;let n=l[t];l[t]=l[e],l[e]=n}return l}function el(l){F("[data-related-stories]").forEach(t=>{let e=B("ul[data-related-stories-list]",t);if(e)return ll(l,t,e);let n=B("ul[data-related-stories-site-map]",t);if(n)return nl(l,n)})}function ll(l,t,e){var Q,X,J;let n=e.getAttribute("data-page"),d=(Q=e.getAttribute("data-filter"))!=null?Q:"list",i=e.getAttribute("data-content-titles")!=="false",a=e.getAttribute("data-content-descriptions")!=="false",V=(X=e.getAttribute("data-sort-order"))!=null?X:"Recently published",c=e.hasAttribute("data-filter-pages")?JSON.parse(e.getAttribute("data-filter-pages")):[],o=e.hasAttribute("data-shapes")?JSON.parse(e.getAttribute("data-shapes")):{},b=e.getAttribute("data-default-shape"),W=e.hasAttribute("data-external-links")?JSON.parse(e.getAttribute("data-external-links")):[],Z=e.hasAttribute("data-item-overrides")?JSON.parse(e.getAttribute("data-item-overrides")):[],G;e.hasAttribute("data-limit")&&(G=(J=parseInt(e.getAttribute("data-limit")))!=null?J:void 0);let h=c;switch(d){case"subtree":let{relation:r,relationNodeId:N,includeSelfInList:R}=e.hasAttribute("data-filter-subtree")?JSON.parse(e.getAttribute("data-filter-subtree")):{relation:"children",relationNodeId:n,includeSelfInList:!1};h=l.getSubpageIds(r,N,n,R);break;case"tags":let p=e.hasAttribute("data-filter-tag-rule")?e.getAttribute("data-filter-tag-rule"):"any",I=e.hasAttribute("data-filter-tags")?JSON.parse(e.getAttribute("data-filter-tags")):[];h=l.getTaggedPageIds(I,p).filter(S=>S!==n);break}let s=h.map(r=>{let N=W.find(p=>p.id===r),R=Z==null?void 0:Z.find(p=>p.id===r);return N?l.externalLinkToProjectPage(N):l.getProjectPage(r,R)}).filter(r=>r);switch(V){case"Recently published":s.sort((R,p)=>p.publishedAt.getTime()-R.publishedAt.getTime());break;case"A - Z":s.sort((R,p)=>R.title.localeCompare(p.title));break;case"Z - A":s.sort((R,p)=>p.title.localeCompare(R.title));break;case"Random":tl(s);break;case"Manually sorted":let r=[],N=[...s];for(let R of c){let p=s.find(I=>I.pageId===R);p&&(r.push(p),N=N.filter(I=>I.pageId!==R))}s=r.concat(N)}let g=s.slice(0,G);if(g.length===0){t.remove();return}let m=B('[data-template="item"]',e);if(!m){t.remove();return}F("[data-template]",e).forEach(r=>{r.removeAttribute("data-template"),m.remove(),m.style.removeProperty("display")});let T=F("a[data-item-url]",m),Y=F("img[data-item-media]",m),E=F("[data-item-title]",m),D=F("[data-item-description]",m),w=F("[data-item-image]",m);g.forEach(r=>{T.forEach(R=>{if(l.isEmbedLink(r.url)){let{path:p,url:I}=It(l,r.url);R.setAttribute("href",I),R.setAttribute("data-path",p)}else R.setAttribute("href",r.url)}),r.cover&&(Y.forEach(R=>R.setAttribute("src",r.cover.url)),Y.forEach(R=>R.setAttribute("alt",`Cover image for ${r.title}`))),E.forEach(R=>{R.textContent=r.title,i||(R.style.display="none")}),D.forEach(R=>{var p;R.textContent=(p=r.description)!=null?p:"",a||(R.style.display="none")}),w.forEach(R=>{if(o){let p=b||o[r.pageId];R.className=`crop-${p}`}}),E.forEach(R=>R.textContent=r.title),D.forEach(R=>{var p;return R.textContent=(p=r.description)!=null?p:""});let N=m.cloneNode(!0);_t(N),r.cover?F("source[data-item-mediasource]",N).forEach(R=>{r.cover.sources.forEach(p=>{let I=R.cloneNode(),S=R.nextSibling;I.srcset=p.srcSet,I.type=p.type,R.parentElement.insertBefore(I,S)}),R.remove()}):F(".related-story-image",N).forEach(R=>R.remove()),e.appendChild(N)})}function nl(l,t){let e=F("[data-template]",t),n=B('[data-template="page"]',t),d=B('[data-template="node"]',t);e.forEach(a=>{a.removeAttribute("data-template"),a.remove(),a.style.removeProperty("display")});function i(a,V){var s;let c=l.index.nodes[a];if(!c)return;let o=l.index.pages[c.page];if(!o&&!c)return;let W=(o?n:d).cloneNode(!0),Z=c.page?l.getPageUrl(c.page):"",G=o?o.title:c.label;F("[data-item-title]",W).forEach(g=>{g.textContent=G}),F("a[data-item-url]",W).forEach(g=>{g.setAttribute("href",Z)});let h=B("ul[data-item-children]",W);h&&((s=c.children)!=null?s:[]).forEach(g=>i(g,h)),V.appendChild(W)}l.index.roots.forEach(a=>i(a,t))}function dl(l,t,e,n){let d=F("[data-template]",n),i=B('[data-template="link"]',n),a=B('[data-template="no-link"]',n);if(!i||!a){n.remove();return}e||F("[data-themelogos]",n).forEach(c=>c.remove()),d.forEach(V=>V.remove());for(let{link:V,media:c}of t){let b=(V?i:a).cloneNode(!0),W=Object.values(c).reduce((Z,{alt:G})=>Z||G,"");for(let Z of F("img[data-logo-img]",b))al(l,Z,c,W)||Z.remove();if(V)for(let Z of F("a[data-logo-link]",b))il(Z,V);n.appendChild(b)}}function al(l,t,e,n){let d=t.getAttribute("data-logo-img");if(d in e){let{src:i,alt:a}=e[d];return t.setAttribute("src",l.publishUrl+i.replace(l.baseUrl,"")),(a||n)&&t.setAttribute("alt",a||n),!0}return!1}function il(l,t){var n;l.setAttribute("href",t.href),t.blank&&l.setAttribute("target","_blank");let e=new Set((n=l.getAttribute("rel"))!=null?n:[]);t.noreferrer&&e.add("noreferrer"),t.nofollow&&e.add("nofollow"),e.size>0&&l.setAttribute("rels",Array.from(e).join(" "))}function It(l,t){let e="/"+t.replace(l.publishUrl,"").replace(/\/?index\.html/,""),n=new URL(document.location.href);return n.searchParams.set("shpath",e),{path:e,url:decodeURIComponent(n.toString())}}function _t(l){F("a[data-path]",l).forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();let n=t.getAttribute("data-path");window.Shorthand.navigateInProject(n,t.href)})})}Nt();})();
/*! Bundled license information:

classnames/dedupe.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)
*/
//# sourceMappingURL=project.285303.min.js.map
